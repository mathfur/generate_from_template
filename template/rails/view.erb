<% require "nkf" %>

<!-- View -->
--[app/views/layouts/application.html.haml:c]-------------------------------------------
!!! 5
%html
  %head
    %meta(charset="utf-8")
    = csrf_meta_tags
    %meta(name="viewport" content="width=device-width, initial-scale=1.0")
    %title= content_for?(:title) ? yield(:title) : "CheckpadEmulate"
    = stylesheet_link_tag "application", :media => "all"
    / Le HTML5 shim, for IE6-8 support of HTML elements
    /[if lt IE 9]
      = javascript_include_tag "http://html5shim.googlecode.com/svn/trunk/html5.js"
    %link(href="images/favicon.ico" rel="shortcut icon")
    %link(href="images/apple-touch-icon.png" rel="apple-touch-icon")
    %link(href="images/apple-touch-icon-72x72.png" rel="apple-touch-icon" sizes="72x72")
    %link(href="images/apple-touch-icon-114x114.png" rel="apple-touch-icon" sizes="114x114")
  %body
    %div#container
      .navbar.navbar-fixed-top
        .navbar-inner
          .container-fluid
            %a.btn.btn-navbar(data-target=".nav-collapse" data-toggle="collapse")
              %span.icon-bar
              %span.icon-bar
              %span.icon-bar
            %a.brand(href="#") CheckpadEmulate
            .container.nav-collapse
              %ul.nav
                %li= render 'shared/header'

      .container-fluid

        .row-fluid
          .span3
            .well.sidebar-nav
              %ul.nav.nav-list
                %li.nav-header Sidebar
                %li= yield :submenu
          .span9
            = yield :main

        %footer
          %p= render 'shared/footer'
      /
        Javascripts
        \==================================================
      / Placed at the end of the document so the pages load faster
      = javascript_include_tag "application"
--


--[app/views/shared/_header.html.haml:c]---------------------------
%ul#global_menu
  ■GLOBAL_MENU■
--

--[app/views/shared/_footer.html.haml:c]---------------------------
■FOOTER■
--

<%-
OOHelper::Models.new(csv_fname).models_group_by_cont_and_view.each do |args, location_and_models| -%>
--[app/views/<%= args.join('/') %>.html.haml:c]-------------------------------------------
<%- location_and_models.each do |location, models_| -%>
<%= location.present? ? "- content_for :#{location} do" : '%div' %>
<%- # %divについて。これが無いとhaml文法エラーと成るためやむ追えずつけた -%>
<%- models_.each do |t| -%>
  <%= t.respond_to?(:before_table) ? t.before_table : '' %>
<%- case t.template -%>
<%- when "index" -%>
  %table.<%= t.single %>.table.table-striped.table-bordered.table-condense
    %tr
      <%- t.attrs do |a| -%>
      %th.<%= a.name %>= <%= t.locals.singularize.camelize %>.human_attribute_name("<%= a.name %>")
      <%- end -%>
    - <%= t.before_each %>.each do |<%= t.locals.singularize %>|
      %tr
        <%- t.attrs do |a| -%>
        %td.<%= a.name %>{:title => <%= a.tooltip.blank? ? '""' : a.tooltip %>}= <%= a.cell_val.present? ? a.cell_val : "''" %>
        <%- end -%>

<%- when "show" -%>
  %table.<%= t.single %>.table.table-striped.table-bordered.table-condense
    <%- t.attrs do |a| -%>
    %tr
      %th.<%= a.name %>.key= <%= n(a.header == '{default}' ? "t('label.#{a.name}')" : a.header) %>
      %td.<%= a.name %>.val= <%= n(a.cell_val) %>
    <%- end -%>

<%- when "menu" -%>
  %table.<%= t.single %>.table.table-striped.table-bordered.table-condense
    <%- t.attrs do |a| -%>
    %tr
      <%- if a.header != '' -%>
      %th.<%= a.name %>.key <%= a.header %>
      <%- end -%>
      %td.<%= a.name %>.val= <%= a.cell_val.present? ? a.cell_val : "''" %>
    <%- end -%>

<%- when "bootstrap-navigation" -%>
  %ul.nav
    <%- t.attrs.sort_by{|a| a.order}.each do |a| -%>
    %li.active.<%= a.name %>= <%= n(a.cell_val) %>
    <%- end -%>

<%- when "rects" -%>
  %svg.<%= t.su %>
    %tr
    - <%= t.before_each %>.each do |<%= t.locals.su %>|
      %tr
        <%- t.attrs do |a| -%>
        %rect{:class => <%= a.name %>, :x1 => <%= a.x1 %>, :y1 => <%= a.y1 %>, :x2 => <%= a.x2 %>, :y2 => <%= a.y2 %>}
        <%- end -%>
<%- end # case end -%>
  <%= t.respond_to?(:after_table) ? t.after_table : ''%>

<%- end #models_ each -%>
<%- end # location_and_models each end -%>
--

<%- end # models_group_by_cont_and_view each end -%>

<!-- assets -->
--[app/assets/stylesheets/application.css.scss:c]-------------------------------------------
<%- thema = :bootstrap -%>
<%- case thema -%>
<%- when :bootstrap -%>
/*
 *= require_self
 *= require_tree .
*/
<%- when :default -%>
/*
 *= require_self
 *= require_tree .
*/

/* box-sizing */
* { -moz-box-sizing: padding-box }

/* display */
ul#global_menu { display: -moz-box; }

/* float */
div#main { float: right; }
div#submenu { float: left; }
div#footer { clear: left; }

/* width */
div#container { width: 980px; }
ul#global_menu li { width: 175px; }
div#header { width: 100% }
div#footer { width: 100% }
#main { width: 648px; }
#main table { width: 100% }
#submenu { width: 238px; }
#submenu table { width: 100% }

/* height */
html { height: 100%; }
body { height: 100%; }
ul#global_menu { height: 38px }
ul#global_menu li { height: 35px; }

/* margin */
body { margin: 0px; }
#container { margin-left: auto }
#container { margin-right: auto }
ul#global_menu { margin: 0px }
ul#global_menu li { margin: 0px }
#main { margin: 23px }
#submenu { margin: 23px }

/* padding */
body { padding: 0px; }
ul#global_menu { padding: 0px; }
ul#global_menu li { padding: 5px; }

/* list-style */
ul#global_menu li { list-style-type: none; }

/* border */
ul#global_menu { border: 0px; }
ul#global_menu li { border-right: 1px solid rgba(255, 255, 255, 0.3) }
ul#global_menu li { border-left: 1px solid rgba(150, 150, 150, 0.3) }
ul#global_menu li { border-top: 1px solid rgba(200, 200, 200, 0.3) }
ul#global_menu li { border-bottom: 2px solid rgba(60, 60, 60, 0.3) }

/* border-radius */
ul#global_menu { -moz-border-radius: 5px }
ul#global_menu li { -moz-border-radius: 3px }
ul#global_menu li:first-child { -moz-border-radius-topleft: 5px }
ul#global_menu li:first-child { -moz-border-radius-bottomleft: 5px }
ul#global_menu li:last-child { -moz-border-radius-topright: 5px }
ul#global_menu li:last-child { -moz-border-radius-bottomright: 5px }

/* background */
#container { background-color: #ffffff }
a:hover { background-color: rgba(0,0,0,0) }
body { background-color: #eeeeee }
ul#global_menu { background-image: -moz-linear-gradient(#FAFAFA, #DDDDDD) }

/* text-color */
a:hover { color: #333333 }

/* text-decoration */
a { text-decoration: none }
a:hover { text-decoration: none }

/* text-align */
ul#global_menu li { text-align: center }

/* font-family */
body { font-family: "ヒラギノ角ゴ Pro W3", "Hiragino Kaku Gothic Pro", "メイリオ", Meiryo, Osaka, "ＭＳ Ｐゴシック", "MS PGothic", sans-serif; }

/* font-size */
body { font-size: 13px; }

/* tooltip */
#tooltip {
    position:   absolute;
    width:      12em;
    background: #999;
    padding:    10px;
}
#tooltip h3, #tooltip div {
    font-size:   1em;
    font-weight: normal;
    margin:      0;
}
<%- end -%>

/* 各テーブルに対応するCSS */
<%- OOHelper::Models.new(csv_fname).models do |t| -%>
// bootstrap優先のため一旦コメントアウト
//table.<%= t.single %> { background-color: #ffffff }
////table.<%= t.single %> { box-shadow: 2px 2px 2px rgba(30, 30, 30, 0.8); }
//table.<%= t.single %> th { background: #0030ac }
//table.<%= t.single %> { border-collapse: collapse; }
//table.<%= t.single %> { border: 1px solid #4b4b4b }
//table.<%= t.single %> th { border: 1px solid #888888 }
//table.<%= t.single %> td { border: 1px solid #888888 }
//table.<%= t.single %> th { text-style: bold }
//table.<%= t.single %> th { color: #ffffff }

<%- case t.template -%>
<%- when "index" -%>

<%- when "edit" -%>

<%- end # case end -%>
<%- end -%>

--

--[app/assets/javascripts/application.js:c]-------------------------------------------
// This is a manifest file that'll be compiled into including all the files listed below.
// Add new JavaScript/Coffee code in separate files in this directory and they'll automatically
// be included in the compiled file accessible from http://example.com/assets/application.js
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// the compiled file.
//
//= require jquery
//= require jquery_ujs
//= require twitter/bootstrap
//= require_tree .


/* 各テーブルに対応するjs */
<%- OOHelper::Models.new(csv_fname).models do |t| -%>
<%- case t.template -%>
<%- when "index" -%>

// -- Tooltip --
<%- t.attrs do |a| -%>
<%- if a.tooltip != '' -%>
$('td.<%= a.name %>').Tooltip();
<%- end -%>
<%- end -%>

<%- when "edit" -%>

<%- end # case end -%>
<%- end -%>

--

--[app/assets/javascripts/bootstrap.js.coffee:c]-----------------
jQuery ->
  $("a[rel=popover]").popover()
  $(".tooltip").tooltip()
  $("a[rel=tooltip]").tooltip()
--

--[app/assets/stylesheets/bootstrap_and_overrides.css.less:c]----------------
@import "twitter/bootstrap/bootstrap";
body { padding-top: 60px; }

@import "twitter/bootstrap/responsive";

// Set the correct sprite paths
@iconSpritePath: asset-path('twitter/bootstrap/glyphicons-halflings.png');
@iconWhiteSpritePath: asset-path('twitter/bootstrap/glyphicons-halflings-white.png');

// Set the Font Awesome (Font Awesome is default. You can disable by commenting below lines)
@fontAwesomeEotPath: asset-path('fontawesome-webfont.eot');
@fontAwesomeWoffPath: asset-path('fontawesome-webfont.woff');
@fontAwesomeTtfPath: asset-path('fontawesome-webfont.ttf');
@fontAwesomeSvgzPath: asset-path('fontawesome-webfont.svgz');
@fontAwesomeSvgPath: asset-path('fontawesome-webfont.svg');

// Font Awesome
@import "fontawesome";

// Your custom LESS stylesheets goes here
//
// Since bootstrap was imported above you have access to its mixins which
// you may use and inherit here
//
// If you'd like to override bootstrap's own variables, you can do so here as well
// See http://twitter.github.com/bootstrap/less.html for their names and documentation
//
// Example:
// @linkColor: #ff0000;

--

<%- OOHelper::Models.new(csv_fname).models do |t| -%>
--[app/assets/stylesheets/<%= t.single %>.css.scss:c]-------------------------------------------
<%- t.attrs do |a| -%>
<%- a.css.each do |k, v| -%>
table.<%= t.single %> .<%= a.name %>{ <%= k %>: <%= v %> }

<%- end -%>
<%- end -%>
--
<%- end -%>

--[config/locales/translation_view_ja.yml:c]----------------------------
ja:
  label:
    listing: "%{target}一覧"
    show: 表示
    edit: 編集
    destroy: 削除
    new_target: "%{target}を作成する"

  attention:
    are_you_sure_you_want_to_delete_this_entry: 削除します。よろしいですか?
--
